/**
  ******************************************************************************
  * @file    main.c
  * @author  Ac6
  * @version V1.0
  * @date    01-December-2013
  * @brief   Default main function.
  ******************************************************************************
*/


#include "stm32f4xx.h"
#include "stm32f429i_discovery.h"
#include "stm32f429i_discovery_lcd.h"
#include "timer.h"
#include <string>
#include <sstream>
			
void delay(int count)
{
	while(count!=0)
		count--;
}

int main(void)
{



	LCD_Init();
		LCD_LayerInit();

		/* LTDC reload configuration */
		LTDC_ReloadConfig(LTDC_IMReload);

		/* Enable the LTDC */
		LTDC_Cmd(ENABLE);

		/* Set LCD foreground layer */
		LCD_SetLayer(LCD_FOREGROUND_LAYER);
		LCD_SetTransparency(0);

		/* Set LCD background layer */
		LCD_SetLayer(LCD_BACKGROUND_LAYER);

		/* LCD display message */
		LCD_Clear(LCD_COLOR_WHITE);
		//LCD_SetTextColor(LCD_COLOR_WHITE);

		std::stringstream output;
		  std::string outputstring;
		  const char * chararray;
		  Timer mytimerobject(12,34,56);

		output.str(std::string());
				  mytimerobject.setMin(12);
				  mytimerobject.setSec(23);
				  mytimerobject.setHun(45);
				  output << "Time: " << mytimerobject.printtime();
				  outputstring = "";
				  outputstring = output.str();
				  chararray = "";
				  chararray = outputstring.c_str();

		LCD_DisplayStringLine(LCD_LINE_2,(uint8_t*)"     YOU'LL    ");
		LCD_DisplayStringLine(LCD_LINE_4,(uint8_t*)"     NEVER     ");
		LCD_DisplayStringLine(LCD_LINE_6,(uint8_t*)"      TAKE     ");
		LCD_DisplayStringLine(LCD_LINE_8,(uint8_t*)"       ME      ");
		LCD_DisplayStringLine(LCD_LINE_10, (uint8_t*) chararray);


		STM_EVAL_LEDInit(LED3);
		STM_EVAL_LEDInit(LED4);
		int on = 0;
		while(1)
		{
			STM_EVAL_LEDOn(LED3);
			STM_EVAL_LEDOff(LED4);
			on = 1;
			delay(10000000);
			STM_EVAL_LEDOff(LED3);
			STM_EVAL_LEDOn(LED4);
			on = 0;
			delay(10000000);
		}


}
