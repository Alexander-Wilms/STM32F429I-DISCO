/**
  ******************************************************************************
  * @file    main.c
  * @author  Ac6
  * @version V1.0
  * @date    01-December-2013
  * @brief   Default main function.
  ******************************************************************************
*/


#include "stm32f4xx.h"
#include "stm32f429xx.h"
#include "stm32f429i_discovery.h"
			

int main(void)
{
	HAL_Init();
	ADC_InitTypeDef init;
	init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV2;
	init.Resolution = ADC_RESOLUTION_8B;
	init.DataAlign = ADC_DATAALIGN_RIGHT;
	init.ScanConvMode = ENABLE;
	init.EOCSelection = ADC_EOC_SEQ_CONV;
	init.ContinuousConvMode = ENABLE;
	init.DMAContinuousRequests = ENABLE;
	init.NbrOfConversion = 1;
	init.DiscontinuousConvMode = ENABLE;
	init.NbrOfDiscConversion = 1;
	init.ExternalTrigConv = ADC_EXTERNALTRIGCONV_T2_TRGO;
	init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;

	ADC_HandleTypeDef handle;
	handle->Instance = SR;
	handle.Init = init;
	handle.NbrOfCurrentConversionRank = 1;
	handle->Lock = HAL_UNLOCKED;
	handle.State = HAL_ADC_STATE_RESET;
	handle.ErrorCode = 0;

	HAL_ADC_Init(&init);
}
